// Product database
const products = [
  { name: "Bulb", price: 50, category: "Electric", img: "images/Electric/bulb.png" },
  { name: "Extension Board", price: 200, category: "Electric", img: "images/Electric/extension board.png" },
  { name: "Hammer", price: 150, category: "Hardware", img: "images/Hardware/hammer.png" },
  { name: "Steel Wire", price: 120, category: "Electric", img: "images/Electric/steel wire.jpg" },
  { name: "Wash Basin", price: 800, category: "Sanitary", img: "images/Sanitary/basin.png" },
  { name: "Cold Drink", price: 70, category: "Food", img: "images/Food/cold-drink.png" },
  { name: "Lays Chips", price: 50, category: "Food", img: "images/Food/lays.png" }
];

let cart = [];

// Display products
function displayProducts(list) {
  const container = document.getElementById("product-list");
  container.innerHTML = "";

  list.forEach(p => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>Rs. ${p.price}</p>
      <button onclick="addToCart('${p.name}')">Add to Cart</button>
    `;
    container.appendChild(div);
  });
}

displayProducts(products);

// Category filter
function showCategory(cat) {
  if (cat === "all") {
    displayProducts(products);
  } else {
    displayProducts(products.filter(p => p.category === cat));
  }
}

// Search filter
document.getElementById("search").addEventListener("input", (e) => {
  const term = e.target.value.toLowerCase();
  displayProducts(products.filter(p => p.name.toLowerCase().includes(term)));
});

// Add to cart
function addToCart(name) {
  const product = products.find(p => p.name === name);
  const item = cart.find(i => i.name === name);
  if (item) {
    item.qty++;
  } else {
    cart.push({ ...product, qty: 1 });
  }
  updateCart();
}

// Update cart & total
function updateCart() {
  const list = document.getElementById("cart-items");
  list.innerHTML = "";

  cart.forEach((item, i) => {
    const li = document.createElement("li");
    li.innerHTML = `
      ${item.name} (Rs.${item.price})  
      <div>
        <button onclick="changeQty(${i}, -1)">➖</button>
        <span>${item.qty}</span>
        <button onclick="changeQty(${i}, 1)">➕</button>
      </div>
      <strong>Rs.${item.price * item.qty}</strong>
    `;
    list.appendChild(li);
  });

  const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
  document.getElementById("total").innerText = "Total: Rs. " + total;
}

// Change quantity
function changeQty(index, delta) {
  cart[index].qty += delta;
  if (cart[index].qty <= 0) {
    cart.splice(index, 1);
  }
  updateCart();
}

// Send WhatsApp order
function sendWhatsApp() {
  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }

  let message = "Hello, I want to order:\n";
  cart.forEach(item => {
    message += `- ${item.name} x${item.qty} (Rs.${item.price} each = Rs.${item.price * item.qty})\n`;
  });
  const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
  message += `\nTotal: Rs.${total}`;

  const phone = "923430741102"; // <-- replace with your WhatsApp number
  const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
}




